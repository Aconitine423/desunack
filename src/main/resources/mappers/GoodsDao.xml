<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >


<mapper namespace="com.desunack.desunack.dao.GoodsDao">
    <insert id="goodsRegistrate">
        insert into goods(g_m_uid, brand_name, g_name, company_name, g_value, g_qty, g_startday,
                          g_endday, g_cat_key, g_image, g_detail, g_delivery_kind, g_status, g_total_rating, g_review_count)
        values (#{g_m_uid}, #{brand_name}, #{g_name}, #{company_name}, #{g_value}, #{g_qty}, #{g_startday}, #{g_endday},
                #{g_cat_key}, #{g_image}, #{g_detail}, #{g_delivery_kind}, #{g_status}, #{g_total_rating}, #{g_review_count})
        <selectKey resultType="int" order="AFTER" keyProperty="g_id">
            SELECT LAST_INSERT_ID()
        </selectKey>
    </insert>
    <insert id="goodsTotalSales">
        insert into goods_total_sales(gts_g_id, gts_sales) values(#{g_id}, default)
    </insert>
    <insert id="goodsSweetener">
        insert into goods_sweetener(gs_g_id, gs_s_key) values
        <foreach collection="sList" item = "sweetener"  separator=","> (#{g_id}, #{sweetener})</foreach>
    </insert>
    <insert id="goodsAllergy">
        insert into goods_allergy(ga_g_id, ga_a_key) values
        <foreach collection="aList" item = "allergy"  separator=","> (#{g_id}, #{allergy})</foreach>
    </insert>
    <insert id="goodsInfo">
        insert into goods_info(gi_g_id, gi_kind, gi_origin, gi_factory, gi_caution, gi_cs_phone)
        values(#{g_id}, #{gi_kind}, #{gi_origin}, #{gi_factory}, #{gi_caution}, #{gi_cs_phone} )
    </insert>
</mapper>