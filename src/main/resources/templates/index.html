<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desunack</title>
    <link rel="shortcut icon" href="/img/favicon/favicon-16x16.png" type="image/x-icon">
    <link rel="stylesheet" href="/common/reset.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
<th:block th:replace="~{fragments :: header}"></th:block>
<!-- ================================================================= -->
<!-- 홍보 이미지 슬라이더(Promo Slider): 3개의 배경색 슬라이드를 순환 표시 -->
<!-- ================================================================= -->
<section class="promo-slider">
    <!-- <section> 요소: 문서의 구획(section) 정의
         class="promo-slider": 홍보 슬라이더 스타일링용 -->
    <div class="slider-container">
        <!-- class="slider-container": 슬라이드(wrapper) 컨테이너(container) 레이아웃 -->

        <!-- 첫 번째 슬라이드 (활성 상태 적용) -->
        <div class="slide active" style="background-color: #ff6b9d;"></div>
        <!-- class="slide": 각 슬라이드(item) 요소
        class="active": 현재(active) 슬라이드 강조용
        style 속성: 인라인(inline) 스타일 → 배경색(background-color) 지정 -->

        <!-- 두 번째 슬라이드 -->
        <div class="slide" style="background-color: #4ecdc4;"></div>

        <!-- 세 번째 슬라이드 -->
        <div class="slide" style="background-color: #45b7d1;"></div>
    </div>

    <!-- 슬라이더 하단 도트(Pagination Dots) -->
    <div class="slider-dots">
        <!-- class="slider-dots": 도트(dot) 그룹(group) 레이아웃 -->
        <span class="dot active"></span>
        <!-- <span> 요소: 인라인(inline) 컨테이너
             class="dot": 페이지네이션(dot) 표시용
             class="active": 현재 페이지 표시 -->
        <span class="dot"></span>
        <span class="dot"></span>
    </div>
</section>

<!-- ================================================================= -->
<!-- 회원정보 기반 결과 섹션(Member Results): 그리드 형태로 8개 아이템 표시  -->
<!-- ================================================================= -->
<section class="member-results">
    <!-- class="member-results": 회원결과 섹션 스타일링용 -->

    <!-- 섹션 제목 -->
    <h2 class="section-title">회원 정보 기반 결과</h2>
    <!-- <h2> 요소: 제목(header) 레벨 2
         class="section-title": 섹션 제목 디자인용 -->

    <!-- 4열 그리드 컨테이너 -->
    <div class="grid-container" id="product-results-container">
        <!-- class="grid-container": CSS Grid 레이아웃 사용, 4열(column) 구성 -->

        <!-- 각 그리드 아이템: 배경색으로 구분 -->
        <!--        <th:block th:if="${#lists.isEmpty(session.Json)}">-->
        <!--            <span>리스트가 없습니다.</span>-->
        <!--        </th:block>-->
        <!--        <th:block th:unless="${#lists.isEmpty(session.Json)}">-->
        <!--            <th:block th:each="goods:${session.Json}">-->
        <!--                    <div class="grid-item" th:text="${goods}"></div>-->
        <!--            </th:block>-->
        <!--        </th:block>-->
        <!--        <div class="grid-item" id="item1" style="background-color: #ff6d9d;">-->
        <!--            [[${session.Json}]]-->
        <!--        </div>-->
        <!--        <div class="grid-item" id="item2" style="background-color: #4ecdc4;"></div>-->
        <!--        <div class="grid-item" id="item3" style="background-color: #45b7d1;"></div>-->
        <!--        <div class="grid-item" id="item4" style="background-color: #96ceb4;"></div>-->
        <!--        <div class="grid-item" id="item5" style="background-color: #feca57;"></div>-->
        <!--        <div class="grid-item" id="item6" style="background-color: #ff9ff3;"></div>-->
        <!--        <div class="grid-item" id="item7" style="background-color: #54a0ff;"></div>-->
        <!--        <div class="grid-item" id="item8" style="background-color: #5f27cd;"></div>-->
        <!--        <div class="grid-item" id="item9" style="background-color: #00ff1f;"></div>-->
        <!--        <div class="grid-item" id="item10" style="background-color: #ff001f;"></div>-->
    </div>
</section>

<!-- ================================================================= -->
<!-- 메뉴 목록 섹션(Menu List): 품절 뱃지 표시 예시 포함 -->
<!-- ================================================================= -->
<section class="menu-list">
    <!-- class="menu-list": 메뉴 목록 섹션 스타일링용 -->
    <h2 class="section-title">메뉴 목록</h2>

    <div class="grid-container">
        <!-- 그리드 레이아웃 재사용 -->

        <!-- 품절 처리된 아이템 예시 -->
        <div class="grid-item">
            <div class="img-container" style="background: #ff6d9d;">
                <!-- class="img-container": 이미지 래퍼(wrapper) 스타일링용
                style="background": 배경색 지정 -->

                <!-- 반투명 오버레이 배경 (soldout-bg) -->
                <div class="soldout-bg"></div>
                <!-- class="soldout-bg": Sold Out 배경(overlay) 스타일 -->

                <!-- sold out 뱃지 텍스트 -->
                <div class="soldout-badge"><span>sold<br>out</span></div>
                <!-- class="soldout-badge": Sold Out 배지(badge) 스타일
                <span>: 줄바꿈(<br>) 포함 텍스트 표시용 -->
            </div>
        </div>

        <!-- 나머지 정상 상품 아이템 -->
        <div class="grid-item" style="background-color: #ff6d9d;"></div>
        <div class="grid-item" style="background-color: #4ecdc4;"></div>
        <div class="grid-item" style="background-color: #45b7d1;"></div>
        <div class="grid-item" style="background-color: #96ceb4;"></div>
        <div class="grid-item" style="background-color: #feca57;"></div>
        <div class="grid-item" style="background-color: #ff9ff3;"></div>
        <div class="grid-item" style="background-color: #54a0ff;"></div>
        <div class="grid-item" style="background-color: #5f27cd;"></div>
    </div>
</section>
<th:block th:replace="~{fragments :: footer}"></th:block>
<!-- ================================================================= -->
<!-- 외부 JavaScript 파일 로드: 슬라이더 동작 및 팝업 위치 제어 -->
<!-- ================================================================= -->
<!--<script src="/js/script-copy.js"></script>-->
<script src="/js/main.js"></script>
<!-- <script> 요소: 외부 JavaScript 파일 연결
     src 속성: script.js 경로 지정 -->
<script th:inline="javascript">
    // console.log([[${session.Json}]])
    let goods = [[${session.gList}]];
    const createHtml = (goods) => {
        console.log(goods);
        let html = "";
        for (const str of goods) {
            let substr = str.replaceAll('{', '');
            substr = substr.replaceAll('}', '');
            substr = substr.replaceAll(' ', '');
            substr = substr.replaceAll('"', '');
            console.log(substr);
            subgoods = substr.split(',');
            let startname = substr.indexOf('g_name') + 7;
            let endname = substr.indexOf('g_image') - 1;
            console.log(subgoods);
            let name = substr.substring(startname, endname);
            let startimage = substr.indexOf('g_image') + 8;
            let endimage = substr.indexOf('g_m_uid') - 1;
            let imageUrl = substr.substring(startimage, endimage);
            console.log(name, imageUrl);
            html += `<div class="grid-item">
            <img src="${imageUrl}" alt="${name}" class="product-image"/>
            <span class="product-name">${name}</span>
        </div>`;
        }
        return html;
    }
    $(document).ready(function () {
        const $container = $('#product-results-container');
        $container.empty();
        try {
            const html = createHtml(goods);
            $container.html(html);
        } catch (e) {
            console.log(e);
            $container.html('<span class="error-message">데이터를 불러오는 데 실패했습니다.</span>')
        }
    });


    // const createGridItem = (product) => {
    //     // 상품 이름과 이미지 URL 가져오기
    //     const name = product.g_name;
    //     const imageUrl = product.g_image;
    //
    //     // HTML 요소 생성
    //     return `
    //     <div class="grid-item">
    //         <img src="${imageUrl}" alt="${name}" class="product-image" />
    //         <span class="product-name">${name}</span>
    //     </div>
    // `;
    // };
    //
    // const fetchAndRenderProducts = async () => {
    //     const $container = $('#product-results-container');
    //     $container.empty(); // 기존 내용 초기화
    //
    //     try {
    //         // 서버 API에서 상품 데이터(JSON)를 가져옵니다.
    //         const response = await axios.get('/'); // API URL을 프로젝트에 맞게 수정하세요.
    //         const products = response.data; // JSON 데이터 배열
    //         console.log(products);
    //         if (products.length === 0) {
    //             $container.html('<span class="no-results">상품이 없습니다.</span>');
    //             return;
    //         }
    //
    //         // 각 상품에 대해 HTML을 생성하고 컨테이너에 추가합니다.
    //         const html = products.map(product => createGridItem(product)).join('');
    //         $container.html(html);
    //
    //     } catch (error) {
    //         console.error('상품 데이터를 불러오는 중 오류가 발생했습니다:', error);
    //         $container.html('<span class="error-message">데이터를 불러오는 데 실패했습니다.</span>');
    //     }
    // };
    //
    // // 페이지 로드 시 함수 실행
    // $(document).ready(fetchAndRenderProducts);
</script>
</body>
</html>
