<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>회원가입 유형 선택</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <link rel="stylesheet" href="/common/reset.css">
    <style>
        body {
            background-color:  #f1f0e7;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 1rem;
            margin: 0;
            color: #374151; /* 기본 텍스트 색상 */
        }
        .logoContainer {
            display: flex;
            justify-content: center;
            margin-bottom: -1rem;
        }
        .container {
            background-color: #fff;
            padding: 2.5rem; /* 40px */
            border-radius: 1.5rem; /* 24px */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            max-width: 48rem;
            width: 100%;
            text-align: center;
        }
        .container h1 {
            color: #374151;
            font-weight: 800;
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .btnContainer {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 3rem;
        }
        .signupBtn {
            background-color: #d6e5f3;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            border-radius: 1rem;
            transition: all 0.3s ease-in-out;
            transform: scale(1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            text-decoration: none;
        }
        .signupBtn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        .signupBtn h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
            margin: 0;
        }
        .signupBtn p {
            font-size: 1rem;
            color: #4b5563;
            margin-top: 1.5rem;
        }
        .homeLogo {
            display: block;
            width: 240px;
            height: auto;
        }

    /*  모달창  */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: rgba(0, 0, 0, 0.4);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modalContent {
            background-color: #fefefe;
            padding: 0;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 50%;
            height: 90%;
            max-width: 120rem;
            position: relative;
            overflow: auto;
        }

    /*  iframe 스타일  */
        .modalIframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .closeBtn {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 25px;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
        }
        .closeBtn:hover,
        .closeBtn:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="logoContainer">
<a href="/" class="homeLogo"><img src="/img/logo.png" alt="홈으로"></a>
</div>

<div class="container">
    <h1>회원가입</h1>
    <p>가입하려는 회원 유형을 선택해주세요.</p>
    <div class="btnContainer">
<!--    소비자 회원가입 버튼    -->
        <a href="/signup/customerfrm" id="customerJoinBtn" class="signupBtn">
            <h2>일반 회원</h2>
            <p>개인 구매를 하는 소비자 회원</p>
        </a>

<!--    판매자 회원가입 버튼    -->
        <a href="/signup/sellerfrm" id="sellerJoinBtn" class="signupBtn">
            <h2>판매 회원</h2>
            <p>상품 판매를 하는 판매자 회원</p>
        </a>
    </div>
</div>
<!-- 모달창 -->
<div id="signupModal" class="modal">
    <div class="modalContent">
        <span class="closeBtn">&times;</span>
<!--    customerFrm.html 로드할 iframe    -->
        <iframe id="customerModalIframe" class="modalIframe" src="" title="소비자 회원가입 페이지"></iframe>
    </div>
</div>
</body>
<script th:inline="javascript">
    const $customerModalIframe = $('#customerModalIframe');
    // iframe의 높이를 내부 콘텐츠에 맞게 조절하는 함수
    function resizeIframe() {
        try {
            // iframe 내부 문서의 body 높이를 가져와서 iframe에 적용
            const iframeBody = $customerModalIframe.contents().find('body')[0];
            if (iframeBody) {
                $customerModalIframe.css('height', iframeBody.scrollHeight + 'px');
            }
        } catch (e) {
            console.error("Iframe content cannot be accessed due to security restrictions:", e);
            // 외부 도메인일 경우 예외 처리
            // 여기서는 동일 출처이므로 발생하지 않음
        }
    }

    // 일반회원 버튼 클릭시 모달 열기
    $("#customerJoinBtn").on('click', function (event) {
        event.preventDefault();
        $("#customerModalIframe").attr("src", "/signup/customerfrm");
        $("#signupModal").css("display", "flex");
    })

    // 판매회원 버튼 클릭시 모달 열기
    $("#customerJoinBtn").on('click', function (event) {
        event.preventDefault();
        $("#customerModalIframe").attr("src", "/signup/customerfrm");
        $("#signupModal").css("display", "flex");
    })

    // iframe 로드가 완료되면 높이 조절 함수 호출
    $customerModalIframe.on('load', function() {
        resizeIframe();
    });

    // 닫기 버튼 클릭시 모달 닫기
    $(".closeBtn").on('click', function () {
        $("#signupModal").css("display", "none");
        $("#customerModalIframe").attr("src", "");
    })
</script>
</html>